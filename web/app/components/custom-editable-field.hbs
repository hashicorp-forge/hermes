<div class="-mx-[5px]" ...attributes>
  {{#if this.typeIsString}}

    <EditableField
      data-test-custom-string-field
      @value={{get @document @field}}
      @onChange={{@onChange}}
      @loading={{@loading}}
      @disabled={{@disabled}}
      @class="text-body-200 p-[5px]"
    >
      <:default as |F|>
        <span class="truncate" title={{F.value}}>
          {{or F.value "---"}}
        </span>
      </:default>
    </EditableField>

  {{else if this.typeIsPeople}}
    <EditableField
      data-test-custom-people-field
      @value={{get @attributes "value"}}
      @onChange={{@onChange}}
      @loading={{@loading}}
      @disabled={{@disabled}}
      @class="p-[5px]"
    >
      <:default>
        {{#if this.people.length}}
          <ol>
            {{#each this.people as |person|}}
              <li class="whitespace-nowrap">
                {{#if person.imgURL}}
                  <img
                    src="{{person.imgURL}}"
                    class="h-4 w-4 rounded-full align-middle"
                  />
                {{/if}}
                {{person.email}}
              </li>
            {{/each}}
          </ol>
        {{else}}
          ---
        {{/if}}
      </:default>
      <:editing as |F|>
        <Inputs::PeopleSelect
          {{autofocus targetChildren=true}}
          {{did-insert F.applyInputClasses}}
          class="multiselect--narrow"
          @selected={{this.people}}
          @onChange={{this.updateEmails}}
          {{click-outside (fn F.update this.people)}}
          data-test-custom-people-field-input
        />
      </:editing>
    </EditableField>
  {{/if}}

</div>
