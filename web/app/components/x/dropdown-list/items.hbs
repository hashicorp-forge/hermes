{{! Listen for ArrowUp/ArrowDown/Enter }}
{{on-document "keydown" this.maybeKeyboardNavigate}}

{{#if this.noMatchesFound}}
  {{#if (has-block "no-matches")}}
    {{yield to="no-matches"}}
  {{else}}
    <div
      class="x-dropdown-list-empty-state"
      data-test-dropdown-list-empty-state
    >
      No matches
    </div>
  {{/if}}
{{else}}
  {{! @glint-ignore - element helper not yet typed }}
  {{#let (element (if @listIsOrdered "ol" "ul")) as |MaybeOrderedList|}}
    {{#if this.listIsShown}}
      <MaybeOrderedList
        data-test-x-dropdown-list
        id="x-dropdown-list-items-{{@contentID}}"
        class="x-dropdown-list-items"
        role={{if this.args.inputIsShown "listbox" "menu"}}
        aria-activedescendant={{this.ariaActiveDescendant}}
      >
        {{#each-in @shownItems as |item attrs|}}
          {{! @glint-ignore - not yet typed }}
          <X::DropdownList::Item
            @value={{item}}
            @contentID={{@contentID}}
            @attributes={{attrs}}
            @isSelected={{eq @selected item}}
            @focusedItemIndex={{@focusedItemIndex}}
            @listItemRole={{@listItemRole}}
            @hideContent={{@hideContent}}
            @onItemClick={{@onItemClick}}
            @setFocusedItemIndex={{@setFocusedItemIndex}}
            as |i|
          >
            {{! @glint-ignore - not yet typed }}
            {{yield i to="item"}}
          </X::DropdownList::Item>
        {{/each-in}}
      </MaybeOrderedList>
    {{/if}}
  {{/let}}
{{/if}}
