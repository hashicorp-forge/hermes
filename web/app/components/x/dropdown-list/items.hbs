{{! Listen for ArrowUp/ArrowDown/Enter }}
{{on-document "keydown" this.maybeKeyboardNavigate}}

{{#if this.noMatchesFound}}
  {{#if (has-block "empty-state")}}
    {{yield to="empty-state"}}
  {{else}}
    <div class="x-dropdown-list-empty-state">
      No matches
    </div>
  {{/if}}
{{else}}
  {{#let (element (if @listIsOrdered "ol" "ul")) as |MaybeOrderedList|}}
    <MaybeOrderedList
      id="x-dropdown-list-{{@id}}"
      class="x-dropdown-list"
      role={{if this.args.inputIsShown "listbox" "menu"}}
      aria-activedescendant={{this.ariaActiveDescendant}}
    >
      {{#if @shownItems}}
        {{#each-in @shownItems as |item attrs|}}
          <X::DropdownList::Item
            @role={{@listItemRole}}
            @value={{item}}
            @attributes={{attrs}}
            @selected={{eq @selected item}}
            @hideDropdown={{@hideContent}}
            @onItemClick={{@onItemClick}}
            @setFocusedItemIndex={{@setFocusedItemIndex}}
            @focusedItemIndex={{@focusedItemIndex}}
            as |i|
          >
            {{yield i to="item"}}
          </X::DropdownList::Item>
        {{/each-in}}
      {{/if}}
    </MaybeOrderedList>
  {{/let}}
{{/if}}
