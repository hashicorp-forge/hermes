{{! Listen for ArrowUp/ArrowDown/Enter }}
{{on-document "keydown" this.maybeKeyboardNavigate}}

{{#if this.noMatchesFound}}
  <div class="x-dropdown-list-empty-state" data-test-dropdown-list-empty-state>
    No matches
  </div>
{{else}}
  {{! @glint-ignore - element helper not yet typed }}
  {{#let (element (if @listIsOrdered "ol" "ul")) as |MaybeOrderedList|}}
    {{#if this.listIsShown}}
      <MaybeOrderedList
        data-test-x-dropdown-list
        id="x-dropdown-list-items-{{@contentID}}"
        class="x-dropdown-list-items"
        role={{if this.args.inputIsShown "listbox" "menu"}}
        aria-activedescendant={{this.ariaActiveDescendant}}
      >
        {{#each-in @shownItems as |item attrs|}}
          {{! @glint-ignore - not yet typed }}
          <X::DropdownList::Item
            @value={{item}}
            @contentID={{@contentID}}
            @attributes={{attrs}}
            @selected={{eq @selected item}}
            @focusedItemIndex={{@focusedItemIndex}}
            @listItemRole={{@listItemRole}}
            @hideDropdown={{@hideContent}}
            @onItemClick={{@onItemClick}}
            @setFocusedItemIndex={{@setFocusedItemIndex}}
            as |i|
          >
            {{yield i to="item"}}
          </X::DropdownList::Item>
        {{/each-in}}
      </MaybeOrderedList>
    {{/if}}
  {{/let}}
{{/if}}
