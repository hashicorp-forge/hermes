{{#in-element (html-element ".ember-application") insertBefore=null}}
  <Hds::Modal
    data-test-edit-related-resource-modal
    @onClose={{@hideModal}}
    as |M|
  >
    <M.Header data-test-edit-related-resource-modal-header>
      Edit resource
    </M.Header>
    <M.Body>
      <div id="{{this.id}}-body">
        {{! Content placed via in-element }}
      </div>
    </M.Body>
    <M.Footer>
      <Hds::ButtonSet>
        <span id="{{this.id}}-submit">
          {{! Button placed via in-element }}
        </span>
        <Hds::Button
          @text="Cancel"
          @color="secondary"
          {{on "click" @hideModal}}
        />
        <Hds::Button
          data-test-edit-related-resource-modal-delete-button
          @text="Delete"
          @color="tertiary"
          @icon="trash"
          class="text-color-foreground-critical hover:text-color-foreground-critical-on-surface"
          {{on "click" (fn @removeResource @resource)}}
        />
      </Hds::ButtonSet>
    </M.Footer>
  </Hds::Modal>
{{/in-element}}

{{#if this.formIsRendered}}
  {{! TODO: explain this: }}
  {{#in-element (html-element this.bodySelector) insertBefore=null}}
    <RelatedResources::ExternalResourceForm
      @onSave={{@onSave}}
      @resource={{@resource}}
    >
      <:submit as |rr|>
        {{#in-element (html-element this.submitSelector) insertBefore=null}}
          <Hds::Button
            data-test-edit-related-resource-modal-save-button
            @text="Save changes"
            @color="primary"
            {{on "click" rr.submit}}
          />
        {{/in-element}}
      </:submit>
    </RelatedResources::ExternalResourceForm>
  {{/in-element}}
{{else}}
  <div class="absolute top-0 left-0" {{did-insert this.renderForm}}></div>
{{/if}}
