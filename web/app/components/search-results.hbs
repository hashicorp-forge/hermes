<section class="flex min-h-full flex-1 flex-col items-center">
  <div class="x-container">
    {{#if (and this.firstPageIsShown this.queryIsProductName)}}
      <div
        class="flex w-full flex-col items-start pb-10"
        data-test-results-product-link
      >
        <Hds::Card::Container
          @level="mid"
          @hasBorder={{true}}
          @overflow="hidden"
          class="flex flex-col items-start space-y-3 px-4 pt-4 pb-3"
        >
          <Hds::Badge
            @text={{this.capitalizedQuery}}
            @icon={{or (get-product-id @query) "folder"}}
          />
          <Hds::Link::Standalone
            @text="View all {{this.capitalizedQuery}} documents"
            @icon="arrow-right-circle"
            @iconPosition="trailing"
            @route="authenticated.documents"
            @query={{hash product=(array this.capitalizedQuery)}}
          />
        </Hds::Card::Container>
      </div>
    {{/if}}

    {{! TODO: this needs to include projects }}
    {{! Projects can't really be filtered by much other than product/area }}
    <div class="flex h-14 w-full items-center justify-between">
      <h1 class="mb-0 text-display-500">
        Results for “{{@query}}”
      </h1>
      <div class="big-tabs">
        <LinkTo
          {{!-- {{on "click" this.resetLocalProperties}} --}}
          @route="authenticated.my"
          @current-when="authenticated.results"
          class="!text-display-300"
        >
          Documents
        </LinkTo>
        <LinkTo
          {{!-- {{on "click" this.resetLocalProperties}} --}}
          @route="authenticated.my.published"
          @current-when="authenticated.my.published"
          class="!text-display-300"
        >
          Projects
        </LinkTo>
        <LinkTo
          {{!-- {{on "click" this.resetLocalProperties}} --}}
          @route="authenticated.my.drafts"
          @current-when="authenticated.my.drafts"
          class="!text-display-300"
        >
          People
        </LinkTo>
      </div>
    </div>

    {{! TODO: only show if the document tab is selected }}
    <div class="mt-8 mb-12">

      <Header::Toolbar @facets={{@facets}} class="mb-8" />
      <Header::ActiveFilterList />
    </div>

    <div class="flex w-full flex-col space-y-12 pb-10">
      <div class="tile-list">
        {{#each @results.hits as |doc|}}
          <Doc::Tile
            @avatar={{get doc.ownerPhotos 0}}
            @docID={{doc.objectID}}
            @isResult={{true}}
            @modifiedTime={{doc.modifiedTime}}
            @owner={{get doc.owners 0}}
            @productArea={{doc.product}}
            @snippet={{doc._snippetResult.content.value}}
            @status={{lowercase doc.status}}
            @title={{doc.title}}
          />
        {{/each}}
      </div>

    </div>

    <Pagination
      @currentPage={{(add @results.page 1)}}
      @nbPages={{@results.nbPages}}
    />
  </div>

</section>
