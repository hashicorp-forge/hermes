{{#if this.docIsBeingCreated}}
  <div
    data-test-creating-new-doc
    class="hds-typography-display-400 mt-3 text-center"
  >
    <FlightIcon @name="loading" @size="24" />
    <div class="mt-8 text-display-200 font-semibold">
      Creating draft in Google Drive...
    </div>
    <div class="text-body-200 text-color-foreground-faint">This usually takes
      10-20 seconds.</div>
  </div>
{{else}}
  <form
    data-test-new-doc-form
    class="grid grid-cols-[1fr_250px] grid-rows-1 gap-10"
    {{on "submit" this.submit}}
    {{did-insert this.registerForm}}
  >
    <div>
      <div class="space-y-4">
        <h1>Create your
          {{@docType}}</h1>
      </div>
      <div class="space-y-7 pt-10">
        <Hds::Form::TextInput::Field
          data-test-title-input
          @type="text"
          @isRequired={{true}}
          @value={{this.title}}
          name="title"
          placeholder="Enter a document title"
          {{on "input" this.updateForm}}
          as |F|
        >
          <F.Label>Title</F.Label>
          <F.HelperText>
            A succinct outline of the idea you ºre proposing.
          </F.HelperText>
        </Hds::Form::TextInput::Field>

        <div class="relative">
          <Hds::Form::Textarea::Field
            data-test-summary-input
            @value={{this.summary}}
            rows="3"
            name="summary"
            {{on "input" this.updateForm}}
            as |F|
          >
            <F.Label>Summary</F.Label>
            <F.HelperText>
              <span
                class={{if
                  this.summaryIsLong
                  "bg-color-surface-warning text-color-foreground-warning-on-surface transition-colors"
                }}
              >One or two sentences</span>
              outlining your doc.
              {{if this.summaryIsLong "(Just a recommendation)"}}
            </F.HelperText>
          </Hds::Form::Textarea::Field>
        </div>

        <div>
          <div class="mb-2">
            <span class="hermes-form-label">
              Product/Area &nbsp;
              <Hds::Badge @size="small" @text="Required" />
            </span>
            <span class="hermes-form-helper-text hds-form-helper-text">
              Where your doc should be categorized.
            </span>
          </div>
          <Inputs::ProductSelect
            @selected={{this.productArea}}
            @onChange={{this.onProductSelect}}
            class="w-[300px]"
          />
        </div>

        <Hds::Form::Field @layout="vertical" as |F|>
          {{yield
            (hash
              Error=F.Error
              HelperText=F.HelperText
              Label=F.Label
              isRequired=F.isRequired
              isOptional=F.isOptional
            )
          }}
          <F.Control>
            <Inputs::PeopleSelect
              class="multiselect mt-2 w-auto"
              @selected={{this.contributors}}
              @onChange={{this.updateContributors}}
            />
          </F.Control>
          <F.Label>
            <FlightIcon @name="users" />
            Contributors
          </F.Label>
          {{#if this.formErrors.contributors}}
            <F.Error as |E|>
              <E.Message>{{this.formErrors.contributors}}</E.Message>
            </F.Error>
          {{/if}}
          <F.HelperText>
            People to share your doc with. You can always add more later.
          </F.HelperText>
        </Hds::Form::Field>
      </div>
      <div class="h-24"></div>
    </div>
    <div>
      <div class="preview-card">
        <h3>
          <FlightIcon @name="eye" />
          Preview
        </h3>
        <Doc::Tile
          @productArea={{this.productArea}}
          @status="draft"
          @title={{this.title}}
          @owner={{this.authenticatedUser.info.email}}
        />
        <Hds::Button
          data-test-create-button
          @text="Create draft in Google Drive"
          type="submit"
          disabled={{not this.formRequirementsMet}}
          class="w-full"
        />
      </div>
    </div>
  </form>
{{/if}}
