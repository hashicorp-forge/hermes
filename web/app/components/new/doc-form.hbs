{{#if this.docIsBeingCreated}}
  {{! TODO: Move to modal }}
  <div class="hds-typography-display-400 mt-3 text-center">
    <FlightIcon @name="loading" @size="24" />
    <div class="mt-8 text-display-200 font-semibold">
      Creating draft...
    </div>
    <div class="text-body-200 text-color-foreground-faint">This usually takes
      10-20 seconds.</div>
  </div>
{{else}}
  {{#if this.objectTypeIsProject}}{{else}}
    {{! Document type }}
    <div>
      <X::DropdownList
        class="product-select-dropdown-list"
        @items={{this.docTypes}}
        @selected={{this.selectedDocType}}
        @matchAnchorWidth={{true}}
      >
        <:anchor as |dd|>
          <div class="mb-2 flex items-center justify-between">
            <div class="flex items-center">
              <label class="hermes-form-label relative">
                Document type
              </label>
              <Hds::Badge @text="Required" @size="small" class="ml-1.5" />
              <Action
                {{on "click" this.showDocTypeModal}}
                class="ml-1.5 flex text-color-foreground-faint opacity-75 hover:opacity-100"
              >
                <FlightIcon @name="info-fill" class="" />
              </Action>
            </div>
          </div>
          <dd.ToggleAction
            class="x-dropdown-list-toggle-select product-select-default-toggle hds-button hds-button--color-secondary hds-button--size-medium w-full"
          >
            {{#if dd.selected}}
              <FlightIcon
                @name={{or dd.selected.icon "file-text"}}
                class="mr-2.5"
              />
            {{/if}}
            <div
              class={{unless
                dd.selected.longName
                "text-color-foreground-faint"
              }}
            >
              {{or dd.selected.longName "---"}}
            </div>
            {{#if dd.selected.shortName}}
              <div class="ml-2 text-body-100 leading-none opacity-50">
                {{dd.selected.shortName}}
              </div>
            {{/if}}
            <FlightIcon @name="caret" class="product-select-toggle-caret" />
          </dd.ToggleAction>
        </:anchor>
        <:item as |dd|>
          <dd.Action
            class="pr-5"
            {{on "click" (fn this.changeDocType dd.attrs.shortName)}}
          >
            <div class="flex items-center">
              <FlightIcon
                @name={{or dd.attrs.icon "file-text"}}
                class="mr-2.5"
              />
              {{dd.attrs.longName}}
              <div class="ml-2 text-body-100 opacity-50">
                {{dd.attrs.shortName}}
              </div>
            </div>
          </dd.Action>
        </:item>
      </X::DropdownList>
    </div>

    {{! Product/Area }}
    <div>
      <div class="mb-2">
        <span class="hermes-form-label relative">
          Product/Area
          <Hds::Badge @text="Required" @size="small" class="ml-1.5" />
        </span>
      </div>
      <Inputs::ProductSelect
        @selected={{this.productArea}}
        @onChange={{this.onProductSelect}}
        @isFullWidth={{true}}
      />
    </div>

    {{! Contributors }}
    <Hds::Form::Field @layout="vertical" as |F|>
      <F.Control>
        <Inputs::PeopleSelect
          class="multiselect mt-2 w-full"
          @selected={{this.contributors}}
          @onChange={{this.updateContributors}}
        />
      </F.Control>
      <F.Label>
        Contributors
      </F.Label>
      {{#if this.formErrors.contributors}}
        <F.Error as |E|>
          <E.Message>{{this.formErrors.contributors}}</E.Message>
        </F.Error>
      {{/if}}
      <F.HelperText>
        People to share your doc with. You can always add more later.
      </F.HelperText>
    </Hds::Form::Field>
  {{/if}}
{{/if}}

{{#if this.docTypeModalIsShown}}
  {{#in-element (html-element ".ember-application") insertBefore=null}}
    <Hds::Modal @onClose={{this.hideDocTypeModal}} class="scrollable" as |M|>
      <M.Header>Document types</M.Header>
      <M.Body>
        <div class="scrollable-container max-h-[380px]">

          <ul class="mt-5 space-y-5">
            {{#each this.docTypes as |docType|}}
              <li>
                <div class="flex items-center">
                  <h5 class="mb-0.5 flex text-display-200 font-semibold">
                    {{docType.longName}}
                    <span
                      class="ml-1.5 flex font-regular text-color-foreground-primary"
                    >
                      ({{docType.shortName}})
                    </span>
                  </h5>
                </div>
                <p class="text-body-200">
                  {{or docType.description "No description provided."}}
                </p>
                {{#if docType.moreInfoLink}}
                  <ExternalLink
                    href={{docType.moreInfoLink.url}}
                    @iconIsShown={{true}}
                    class="mt-1 text-body-200 text-color-foreground-action"
                  >
                    {{docType.moreInfoLink.text}}
                  </ExternalLink>
                {{/if}}
              </li>
            {{/each}}
          </ul>
          <div
            class="sticky bottom-0 left-0 h-12 w-full bg-gradient-to-t from-white to-white/0"
          ></div>
        </div>
      </M.Body>

    </Hds::Modal>
  {{/in-element}}
{{/if}}
