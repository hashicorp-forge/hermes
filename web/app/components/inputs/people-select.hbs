<PowerSelectMultiple
  data-test-people-select
  class="hds-form-field__control multiselect w-full"
  @searchEnabled={{true}}
  @search={{perform this.searchDirectory}}
  @searchField="email"
  @options={{this.peopleAndGroups}}
  @selected={{@selected}}
  @calculatePosition={{this.calculatePosition}}
  @renderInPlace={{@renderInPlace}}
  @placeholder="Search organization..."
  @onChange={{@onChange}}
  @onInput={{this.onInput}}
  @onClose={{this.onClose}}
  @onKeydown={{@onKeydown}}
  @onFocus={{this.onFocus}}
  @disabled={{@disabled}}
  @eventType="click"
  {{on "click" this.onClick}}
  {{! TODO: figure out how to disable the "type to search state" }}
  @searchMessage=""
  @selectedItemComponent={{component "multiselect/user-email-image-chip"}}
  ...attributes
  as |value|
>
  {{! there's no way to know if the value is part of what group }}
  <div class="flex items-center gap-2 overflow-hidden py-1">
    <Person::Avatar @email={{value}} @size="medium" class="shrink-0" />

    {{! need some fallback logic / group-specific logic }}

    <div class="w-full">
      <div class="text-body-100 leading-tight">
        {{get-model-attr "person.name" value}}
      </div>
      <div class="text-body-100 leading-tight opacity-70">
        {{get-model-attr "person.email" value}}
      </div>
    </div>
  </div>
</PowerSelectMultiple>
