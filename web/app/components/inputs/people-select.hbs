<PowerSelectMultiple
  data-test-people-select
  {{on "click" this.onClick}}
  @searchEnabled={{true}}
  @search={{perform this.searchDirectory}}
  @searchField="email"
  @options={{this.people}}
  @selected={{@selected}}
  @renderInPlace={{@renderInPlace}}
  @placeholder="Search for your peers..."
  @onChange={{@onChange}}
  @onInput={{this.onInput}}
  @onClose={{this.onClose}}
  @onOpen={{this.maybeClose}}
  @triggerId={{@triggerId}}
  @onKeydown={{this.onKeydown}}
  @disabled={{@disabled}}
  @selectedItemComponent={{component "multiselect/user-email-image-chip"}}
  @calculatePosition={{this.calculatePosition}}
  @loadingMessage="Loading..."
  @eventType="click"
  class="hds-form-field__control multiselect w-full
    {{if (and @isSingleSelect @selected.length) 'selection-made'}}"
  ...attributes
  as |value|
>
  <div class="flex items-center gap-2 overflow-hidden py-1">
    <Person::Avatar @email={{value}} />
    <div class="w-full min-w-0">
      <div class="truncate text-body-200 leading-tight">
        {{get-model-attr "person.name" value}}
        <span class="ml-0.5 text-body-100 text-color-foreground-disabled">
          {{get-model-attr "person.email" value}}
        </span>
      </div>
    </div>
  </div>
</PowerSelectMultiple>
