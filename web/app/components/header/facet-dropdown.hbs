{{!
  Marked up with guidance from:
  https://www.w3.org/WAI/ARIA/apg/patterns/combobox/examples/combobox-select-only/
  https://www.w3.org/WAI/ARIA/apg/patterns/combobox/examples/combobox-autocomplete-list/
  https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/examples/menu-button-links/
  https://www.w3.org/WAI/ARIA/apg/patterns/menu-button/examples/menu-button-actions-active-descendant/
}}

<X::Hds::DropdownList
  @items={{@facets}}
  @listIsOrdered={{true}}
  {{! TODO: figure out "selected" }}
>
  <:anchor as |d|>
    <Hds::Button
      {{did-insert d.floatingUI.registerAnchor}}
      {{on "keydown" (fn d.onTriggerKeydown d.floatingUI)}}
      {{on "click" d.floatingUI.toggleContent}}
      @icon={{if this.dropdownIsShown "chevron-up" "chevron-down"}}
      @iconPosition="trailing"
      @color="secondary"
      @text={{@label}}
      data-test-facet-dropdown-trigger={{@label}}
      disabled={{@disabled}}
      aria-haspopup="listbox"
      aria-controls="x-hds-dropdown-list-{{if
        d.inputIsShown
        'container'
        'list'
      }}-{{d.floatingUI.id}}"
    />
  </:anchor>
  <:item as |i|>
    <i.LinkTo
      @route={{this.currentRouteName}}
      @query={{or
        i.attrs.sortByQueryParams
        (get-facet-query-hash @label i.value i.attrs.selected)
      }}
    >
      <X::Hds::DropdownList::CheckableItem
        @value={{i.value}}
        @count={{i.attrs.count}}
        @selected={{i.attrs.selected}}
      />
    </i.LinkTo>
  </:item>
</X::Hds::DropdownList>
